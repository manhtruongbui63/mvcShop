@model List<Model.EF.Product>
@{
    ViewBag.Title = "View Category ";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var category = (Model.EF.Category)ViewBag.Category;
}
<div class="login">
    <div class="wrap">
        <div class="mens-toolbar">
            <div class="sort" style="width:auto">
                <div class="sort-by">
                    <label style="margin-bottom:0;font-size:21px;font-weight:600">CATEGORY : <span style="font-size:18px">@category.Name</span></label>
                </div>
            </div>

            <div class="pager">
                @if (ViewBag.TotalPage > 0)
                {
                    var pageDisplay = (int)(ViewBag.MaxPage);
                    int totalPage = (int)ViewBag.TotalPage;
                    int currentPage = ((int)ViewBag.Page);


                    var startPage = Math.Max(1, (currentPage - pageDisplay) / 2);
                    var endPage = Math.Min(totalPage, (currentPage + pageDisplay) / 2);

                    var url = "/category/" + category.MetaTitle + "-" + category.ID;

                    <ul class="dc_pagination dc_paginationA dc_paginationA06">
                        @if (currentPage > ViewBag.First)
                        {
                            <li><a href="@url?page=@ViewBag.Prev" class="previous">Previous</a></li>
                        }
                        @for (int i = startPage; i <= endPage; i++)
                        {
                            if (currentPage == i)
                            {
                                <li><a href="@url?page=@i" class="active">@i</a></li>
                            }
                            else
                            {
                                <li><a href="@url?page=@i">@i</a></li>
                            }
                        }
                        @if (currentPage < totalPage)
                        {
                            <li><a href="@url?page=@ViewBag.Next" class="next">Next</a></li>
                        }

                    </ul>
                    <div class="clear"></div>

                }
                else
                {
                    <div class="limiter visible-desktop">
                        <label style="font-size:18px;color:red">Not record</label>
                    </div>
                }
            </div>

            <div class="clear"></div>
        </div>
        <div class="box1" style="display:flex;justify-content:flex-start;flex-wrap:wrap;height:auto">
            @foreach (var item in Model)
            {
                var url = "/detail/" + item.MetaTitle + "-" + item.ID; ;
                <div class="item" style="width:23%;height:auto; margin:1% 0.9%;border:1px solid #DDD">
                    <a href="@url">
                        <div class="view1 view-fifth1">
                            <div class="top_box">
                                <h3 class="m_1"></h3>
                                <p class="m_2">@item.Name</p>
                                <div class="grid_img">
                                    <div class="css3"><img src="@item.Image" alt="" /></div>
                                    <div class="mask1">
                                        <div class="info">Quick View</div>
                                    </div>
                                </div>
                                <div class="price">£@item.Price</div>
                            </div>
                        </div>
                        <span class="rating1">
                            <input type="radio" class="rating-input" id="rating-input-1-5" name="rating-input-1">
                            <label for="rating-input-1-5" class="rating-star1"></label>
                            <input type="radio" class="rating-input" id="rating-input-1-4" name="rating-input-1">
                            <label for="rating-input-1-4" class="rating-star1"></label>
                            <input type="radio" class="rating-input" id="rating-input-1-3" name="rating-input-1">
                            <label for="rating-input-1-3" class="rating-star1"></label>
                            <input type="radio" class="rating-input" id="rating-input-1-2" name="rating-input-1">
                            <label for="rating-input-1-2" class="rating-star"></label>
                            <input type="radio" class="rating-input" id="rating-input-1-1" name="rating-input-1">
                            <label for="rating-input-1-1" class="rating-star"></label>&nbsp;
                            (@item.Quantity)
                        </span>
                        <ul class="list2">
                            <li>
                                <img src="/assets/client/images/plus.png" alt="" />
                                <ul class="icon1 sub-icon1 profile_img">
                                    <li>
                                        <a class="active-icon c1" href="/them-gio-hang?productId=@item.ID&quantity=1">Add To Bag </a>
                                        <ul class="sub-icon1 list">
                                            <li><h3>sed diam nonummy</h3><a href=""></a></li>
                                            <li><p>Lorem ipsum dolor sit amet, consectetuer  <a href="">adipiscing elit, sed diam</a></p></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                        <div class="clear"></div>
                    </a>
                </div>
            }
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
</div>